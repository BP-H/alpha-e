/* Shared orb styles */

.orb {
  --orb-accent: var(--pink);
  --orb-d: 76px;
  --scale: 1;
  position: fixed;
  left: 0;
  top: 0;
  width: var(--orb-d);
  height: var(--orb-d);
  display: grid;
  place-items: center;
  border-radius: 50%;
  border: 1px solid var(--stroke-2);
  cursor: grab;
  user-select: none;
  touch-action: none;
  z-index: 9999;
  background: radial-gradient(120% 120% at 30% 30%, #fff, color-mix(in srgb, var(--orb-accent) 40%, #fff 60%) 60%, var(--orb-accent));
  box-shadow: var(--shadow), 0 0 0 6px color-mix(in srgb, var(--orb-accent) 25%, transparent);
  transform: translate3d(var(--x, 0), var(--y, 0), 0) scale(var(--scale));
  transition: box-shadow .2s ease, filter .2s ease, transform .2s ease;
  overflow: visible;
}

.orb__core {
  position: relative;
  width: 70%;
  height: 70%;
  border-radius: 50%;
  background: radial-gradient(60% 60% at 40% 35%, color-mix(in srgb, #fff 95%, var(--orb-accent) 5%), color-mix(in srgb, #fff 30%, var(--orb-accent) 70%) 65%, transparent 70%);
  box-shadow: inset 0 0 6px color-mix(in srgb, var(--orb-accent) 40%, transparent);
  transition: opacity .3s ease, transform .3s ease;
}

.orb__ring {
  pointer-events: none;
  position: absolute;
  inset: -6px;
  border-radius: 50%;
  box-shadow: inset 0 0 24px color-mix(in srgb, var(--orb-accent) 35%, transparent);
  animation: orbHalo 6s ease-in-out infinite;
}

@keyframes orbHalo {
  0%,100% { transform: scale(1); opacity: .9; }
  50% { transform: scale(1.03); opacity: 1; }
}

.orb.is-hover .orb__ring {
  box-shadow: inset 0 0 32px color-mix(in srgb, var(--orb-accent) 55%, transparent);
}

.orb.is-press { --scale: .95; }
.orb.is-open { --scale: 1.05; }
.orb.is-dragging { cursor: grabbing; transition: none; }

.orb--assistant { --orb-accent: var(--pink); }
.orb--assistant.is-mic { --scale: 1.05; }
.orb--assistant.is-mic .orb__core {
  animation: orbBreath 2.4s ease-in-out infinite;
}
.orb--assistant.is-mic .orb__ring {
  animation: orbRipple 1.4s ease-out infinite;
}

@keyframes orbBreath {
  0%,100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.08); opacity: .85; }
}

@keyframes orbRipple {
  0% { box-shadow: 0 0 0 0 color-mix(in srgb, var(--orb-accent) 35%, transparent); }
  100% { box-shadow: 0 0 0 20px rgba(0,0,0,0); }
}

.orb--menu {
  --orb-accent: var(--blue);
  --orb-d: 56px;
  z-index: 60;
}
.orb--menu .orb__core::after,
.orb--assistant .orb__core::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: conic-gradient(from 0deg, transparent, rgba(255,255,255,.4), transparent 60%);
  animation: orbShimmer 4s linear infinite;
}

@keyframes orbShimmer {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@media (prefers-reduced-motion: reduce) {
  .orb__ring,
  .orb--assistant.is-mic .orb__core,
  .orb--assistant.is-mic .orb__ring,
  .orb--menu .orb__core::after,
  .orb--assistant .orb__core::after {
    animation: none;
  }
}

